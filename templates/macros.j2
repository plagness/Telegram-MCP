{# ÐœÐ°ÐºÑ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½Ð°Ñ… #}

{# ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ-Ð±Ð°Ñ€ #}
{% macro progress_bar(current, total, width=10, style='blocks', show_percent=True) %}
{%- set percent = ((current / total) * 100)|int if total > 0 else 0 -%}
{%- set filled = ((current / total) * width)|round|int if total > 0 else 0 -%}
{%- set empty = width - filled -%}
{%- if style == 'classic' -%}
[{{ '#' * filled }}{{ '.' * empty }}]
{%- elif style == 'blocks' -%}
{{ 'â–“' * filled }}{{ 'â–‘' * empty }}
{%- elif style == 'circles' -%}
{{ 'â—' * filled }}{{ 'â—‹' * empty }}
{%- elif style == 'squares' -%}
{{ 'â– ' * filled }}{{ 'â–¡' * empty }}
{%- else -%}
{{ 'â–ˆ' * filled }}{{ 'â–‘' * empty }}
{%- endif -%}
{%- if show_percent %} {{ percent }}%{% endif -%}
{% endmacro %}

{# Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ #}
{% macro emoji_health(value, max_value=100) %}
{%- set percent = (value / max_value * 100) if max_value > 0 else 0 -%}
{%- if percent >= 80 -%}ðŸ’š
{%- elif percent >= 60 -%}ðŸ’›
{%- elif percent >= 40 -%}ðŸ§¡
{%- elif percent >= 20 -%}â¤ï¸
{%- else -%}ðŸ’”
{%- endif -%}
{% endmacro %}

{# Ð­Ð¼Ð¾Ð´Ð·Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° #}
{% macro emoji_status(value, max_value=100, inverted=False) %}
{%- set percent = (value / max_value * 100) if max_value > 0 else 0 -%}
{%- if inverted -%}
  {%- if percent >= 80 -%}ðŸ”´
  {%- elif percent >= 60 -%}ðŸŸ 
  {%- elif percent >= 40 -%}ðŸŸ¡
  {%- elif percent >= 20 -%}ðŸŸ¢
  {%- else -%}âš«
  {%- endif -%}
{%- else -%}
  {%- if percent >= 80 -%}ðŸŸ¢
  {%- elif percent >= 60 -%}ðŸŸ¡
  {%- elif percent >= 40 -%}ðŸŸ 
  {%- elif percent >= 20 -%}ðŸ”´
  {%- else -%}âš«
  {%- endif -%}
{%- endif -%}
{% endmacro %}

{# Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð·Ð¾Ð½Ñ‹ #}
{% macro emoji_zone(zone) %}
{%- if zone == 'market' -%}ðŸ“ˆ
{%- elif zone == 'mesh' -%}ðŸ“¡
{%- elif zone == 'network' -%}ðŸŒ
{%- elif zone == 'risk' -%}âš ï¸
{%- elif zone == 'cpu' -%}ðŸ”¥
{%- elif zone == 'ram' -%}ðŸ’¾
{%- elif zone == 'gpu' -%}ðŸŽ®
{%- elif zone == 'disk' -%}ðŸ’¿
{%- else -%}â“
{%- endif -%}
{% endmacro %}

{# Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ #}
{% macro emoji_connection(status) %}
{%- if status == 'online' -%}ðŸŸ¢
{%- elif status == 'offline' -%}ðŸ”´
{%- elif status == 'degraded' -%}ðŸŸ¡
{%- elif status == 'maintenance' -%}ðŸŸ 
{%- else -%}âšª
{%- endif -%}
{% endmacro %}

{# Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ #}
{% macro format_duration(seconds) %}
{%- set minutes = (seconds // 60)|int -%}
{%- set hours = (minutes // 60)|int -%}
{%- set days = (hours // 24)|int -%}
{%- set seconds = (seconds % 60)|int -%}
{%- set minutes = (minutes % 60)|int -%}
{%- set hours = (hours % 24)|int -%}
{%- if days > 0 -%}{{ days }}d{{ "%02d"|format(hours) }}h
{%- elif hours > 0 -%}{{ hours }}h{{ "%02d"|format(minutes) }}m
{%- elif minutes > 0 -%}{{ minutes }}m{{ "%02d"|format(seconds) }}s
{%- else -%}{{ seconds }}s
{%- endif -%}
{% endmacro %}

{# Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ #}
{% macro format_timestamp(dt, format='%H:%M:%S') %}
{%- if dt -%}{{ dt.strftime(format) }}
{%- else -%}-
{%- endif -%}
{% endmacro %}
