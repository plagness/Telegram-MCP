/* ============================================
   Bee Design System — Telegram Mini App
   ============================================
   Кастомизация: измените переменные в секции
   THEME CUSTOMIZATION ниже для своего стиля.
   ============================================ */

/* ── THEME CUSTOMIZATION ───────────────────
   Все визуальные параметры темы собраны здесь.
   Чтобы сделать свою тему, измените только
   этот блок — остальной CSS использует
   эти переменные.
   ──────────────────────────────────────────── */
:root {
    /* --- Telegram (автоопределение, fallback для браузера) --- */
    --tg-bg: var(--tg-theme-bg-color, #ffffff);
    --tg-text: var(--tg-theme-text-color, #000000);
    --tg-hint: var(--tg-theme-hint-color, #999999);
    --tg-link: var(--tg-theme-link-color, #2481cc);
    --tg-secondary-bg: var(--tg-theme-secondary-bg-color, #f0f0f0);
    --tg-section-bg: var(--tg-theme-section-bg-color, var(--tg-secondary-bg));
    --tg-subtitle: var(--tg-theme-subtitle-text-color, var(--tg-hint));
    --tg-separator: var(--tg-theme-section-separator-color, rgba(0,0,0,0.08));

    /* --- Акцентные цвета (брендовые) --- */
    --accent:          #FFC107;   /* основной акцент */
    --accent-light:    #FFD54F;   /* hover / подсветка */
    --accent-dark:     #FF8F00;   /* контрастный акцент */
    --accent-glow:     rgba(255, 193, 7, 0.12);  /* свечение */
    --accent-text:     #1A1A1A;   /* текст на акцентных кнопках */
    --accent-shadow:   rgba(255, 193, 7, 0.3);   /* тень кнопок */

    /* --- Статусные цвета --- */
    --success:         #4CAF50;
    --error:           #FF5252;

    /* --- Медали / рейтинг --- */
    --medal-gold:      #FFD700;
    --medal-silver:    #C0C0C0;
    --medal-bronze:    #CD7F32;

    /* --- Скругления --- */
    --radius-sm:  10px;
    --radius-md:  14px;
    --radius-lg:  18px;

    /* --- Отступы --- */
    --spacing:    20px;
    --page-pad:   24px;

    /* --- Типография --- */
    --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    --font-size-base: 15px;
    --font-size-sm:   13px;
    --font-size-xs:   12px;
    --font-size-lg:   20px;
    --font-size-xl:   22px;

    /* --- Анимации (0 для отключения) --- */
    --anim-duration: 0.3s;
    --anim-stagger:  0.05s;

    /* --- Орбитальная система эмодзи --- */
    --orbit1-r:  22px;
    --orbit2-r:  34px;
    --orbit3-r:  44px;
    --binary-r:   8px;

    /* --- Glass morphism (Apple-style) --- */
    --glass-bg:        transparent;
    --glass-border:    rgba(255, 255, 255, 0.25);
    --glass-blur:      16px;
    --glass-saturate:  180%;
    --glass-shadow:    0 2px 16px rgba(0, 0, 0, 0.06);

    /* --- Frosted glass (карточки, поиск, pills — не liquid glass) --- */
    --frosted-bg:      rgba(255, 255, 255, 0.45);
}

/* Тёмная тема: Telegram ставит bg-color близкий к чёрному */
@media (prefers-color-scheme: dark) {
    :root {
        --glass-bg:     transparent;
        --glass-border: rgba(255, 255, 255, 0.06);
        --glass-shadow: 0 2px 16px rgba(0, 0, 0, 0.25);
        --frosted-bg:   rgba(40, 40, 40, 0.45);
    }
}


/* ── Reset ─────────────────────────────────── */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* ── Base ──────────────────────────────────── */

body {
    font-family: var(--font);
    font-size: var(--font-size-base);
    background: var(--tg-bg);
    color: var(--tg-text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
    overflow-x: hidden;
}

.bee-app {
    max-width: 520px;
    margin: 0 auto;
    padding: var(--page-pad);
    padding-top: max(var(--page-pad), env(safe-area-inset-top, 0px));
    padding-bottom: max(var(--page-pad), env(safe-area-inset-bottom, 0px));
    animation: fadeIn var(--anim-duration) ease;
}

a { color: var(--accent-dark); }

/* ── Typography ────────────────────────────── */

.bee-title {
    font-size: var(--font-size-xl);
    font-weight: 700;
    margin-bottom: 8px;
    line-height: 1.3;
}

.bee-subtitle {
    font-size: 14px;
    color: var(--tg-hint);
    line-height: 1.5;
    margin-bottom: var(--spacing);
}

/* ── Loading Overlay ───────────────────────── */

.bee-loading-overlay {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: var(--tg-bg);
    transition: opacity 0.4s ease, visibility 0.4s ease;
}

.bee-loading-overlay.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.bee-loading-text {
    margin-top: 12px;
    font-size: 14px;
    color: var(--tg-hint);
    letter-spacing: 0.5px;
}

/* ── Card ──────────────────────────────────── */

.bee-card {
    background: var(--tg-section-bg);
    border-radius: var(--radius-lg);
    padding: 18px 20px;
    margin-bottom: 20px;
    animation: slideUp var(--anim-duration) ease both;
}

.bee-card:nth-child(2) { animation-delay: calc(var(--anim-stagger) * 1); }
.bee-card:nth-child(3) { animation-delay: calc(var(--anim-stagger) * 2); }
.bee-card:nth-child(4) { animation-delay: calc(var(--anim-stagger) * 3); }
.bee-card:nth-child(5) { animation-delay: calc(var(--anim-stagger) * 4); }

.bee-card-title {
    font-size: var(--font-size-base);
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* ── Button ────────────────────────────────── */

.bee-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 100%;
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--accent), var(--accent-light));
    color: var(--accent-text);
    border: none;
    border-radius: var(--radius-md);
    font-size: 16px;
    font-weight: 600;
    font-family: var(--font);
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s, opacity 0.15s;
    box-shadow: 0 2px 8px var(--accent-shadow);
    text-decoration: none;
    -webkit-tap-highlight-color: transparent;
}

.bee-btn:active:not(:disabled) {
    transform: scale(0.97);
    box-shadow: 0 1px 4px var(--accent-shadow);
}

.bee-btn:disabled {
    opacity: 0.45;
    cursor: default;
    box-shadow: none;
}

.bee-btn--outline {
    background: transparent;
    color: var(--accent);
    border: 2px solid var(--accent);
    box-shadow: none;
}

.bee-btn--outline:active:not(:disabled) {
    background: var(--accent-glow);
}

.bee-btn--danger {
    background: linear-gradient(135deg, var(--error), #FF7043);
    color: #fff;
    box-shadow: 0 2px 8px rgba(255, 82, 82, 0.3);
}

.bee-btn--small {
    padding: 10px 16px;
    font-size: 14px;
    border-radius: var(--radius-sm);
}

.bee-btn--ghost {
    background: transparent;
    color: var(--accent);
    box-shadow: none;
    padding: 10px 16px;
}

/* ── Inputs ────────────────────────────────── */

.bee-input,
.bee-select,
.bee-textarea {
    width: 100%;
    padding: 12px 14px;
    background: var(--tg-bg);
    color: var(--tg-text);
    border: 1.5px solid var(--tg-separator);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-family: var(--font);
    transition: border-color 0.2s, box-shadow 0.2s;
    -webkit-appearance: none;
}

.bee-input:focus,
.bee-select:focus,
.bee-textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent-glow);
}

.bee-input::placeholder {
    color: var(--tg-hint);
    opacity: 0.7;
}

.bee-textarea {
    resize: vertical;
    min-height: 80px;
}

.bee-select {
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23999' stroke-width='2' fill='none'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    padding-right: 36px;
}

/* ── Label ─────────────────────────────────── */

.bee-label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 6px;
    color: var(--tg-text);
}

.bee-label .required {
    color: var(--accent);
    margin-left: 2px;
}

/* ── Radio & Checkbox ──────────────────────── */

.bee-radio-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.bee-radio,
.bee-checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: var(--tg-bg);
    border: 1.5px solid var(--tg-separator);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s;
    font-size: var(--font-size-base);
    -webkit-tap-highlight-color: transparent;
}

.bee-radio:has(input:checked),
.bee-checkbox-label:has(input:checked) {
    border-color: var(--accent);
    background: var(--accent-glow);
}

.bee-radio input,
.bee-checkbox-label input {
    appearance: none;
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid var(--tg-hint);
    border-radius: 50%;
    flex-shrink: 0;
    position: relative;
    transition: border-color 0.2s, background 0.2s;
}

.bee-checkbox-label input {
    border-radius: 6px;
}

.bee-radio input:checked,
.bee-checkbox-label input:checked {
    border-color: var(--accent);
    background: var(--accent);
}

.bee-radio input:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: var(--accent-text);
    border-radius: 50%;
}

.bee-checkbox-label input:checked::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 6px;
    width: 5px;
    height: 9px;
    border: solid var(--accent-text);
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

/* ── Form Field ────────────────────────────── */

.bee-field {
    margin-bottom: var(--spacing);
}

/* ── Badge ─────────────────────────────────── */

.bee-badge {
    display: inline-flex;
    align-items: center;
    padding: 3px 10px;
    background: var(--accent);
    color: var(--accent-text);
    font-size: var(--font-size-xs);
    font-weight: 600;
    border-radius: 20px;
    line-height: 1.4;
}

.bee-badge--outline {
    background: transparent;
    color: var(--accent);
    border: 1px solid var(--accent);
}

.bee-badge--success {
    background: var(--success);
    color: #fff;
}

.bee-badge--error {
    background: var(--error);
    color: #fff;
}

/* ── Progress Bar ──────────────────────────── */

.bee-progress {
    height: 8px;
    background: var(--tg-separator);
    border-radius: 4px;
    overflow: hidden;
    margin: 6px 0;
}

.bee-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-light));
    border-radius: 4px;
    transition: width 0.6s ease;
    min-width: 2px;
}

.bee-progress--lg {
    height: 12px;
    border-radius: 6px;
}

.bee-progress--lg .bee-progress-fill {
    border-radius: 6px;
}

/* ── Stat Grid ─────────────────────────────── */

.bee-stat-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.bee-stat-grid--three {
    grid-template-columns: repeat(3, 1fr);
}

.bee-stat {
    text-align: center;
    padding: 14px 8px;
    background: var(--tg-bg);
    border-radius: var(--radius-sm);
}

.bee-stat-value {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--accent);
    line-height: 1.2;
}

.bee-stat-label {
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
    margin-top: 4px;
}

/* ── Divider ───────────────────────────────── */

.bee-divider {
    height: 1px;
    background: var(--tg-separator);
    margin: var(--spacing) 0;
    position: relative;
}

.bee-divider::after {
    content: '\2B22';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--tg-bg);
    padding: 0 8px;
    color: var(--accent);
    font-size: 10px;
    opacity: 0.5;
}

/* ── Toast ─────────────────────────────────── */

#toast-container {
    position: fixed;
    bottom: max(20px, env(safe-area-inset-bottom, 0px));
    left: 50%;
    transform: translateX(-50%);
    z-index: 10000;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    pointer-events: none;
    width: 90%;
    max-width: 400px;
}

.bee-toast {
    padding: 12px 20px;
    background: var(--tg-text);
    color: var(--tg-bg);
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    animation: slideUp var(--anim-duration) ease, fadeOut 0.3s ease 2.7s forwards;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    pointer-events: auto;
}

.bee-toast--success { background: var(--success); color: #fff; }
.bee-toast--error   { background: var(--error);   color: #fff; }

/* ── Result Screen ─────────────────────────── */

.bee-result {
    text-align: center;
    padding: 48px 24px;
    animation: fadeIn 0.4s ease;
}

.bee-result-icon {
    font-size: 56px;
    margin-bottom: 16px;
    line-height: 1;
}

.bee-result-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    margin-bottom: 8px;
}

.bee-result-text {
    font-size: 14px;
    color: var(--tg-hint);
    margin-bottom: 24px;
}

/* ── Table ─────────────────────────────────── */

.bee-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.bee-table th {
    text-align: left;
    padding: 10px 12px;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--tg-hint);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 2px solid var(--tg-separator);
}

.bee-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--tg-separator);
}

.bee-table tr:last-child td { border-bottom: none; }

.bee-table td.value {
    font-weight: 600;
    color: var(--accent);
    text-align: right;
}

/* ── Chart (CSS-only bar) ──────────────────── */

.bee-chart {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.bee-chart-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.bee-chart-label {
    flex: 0 0 80px;
    font-size: var(--font-size-sm);
    color: var(--tg-text);
    text-align: right;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bee-chart-bar-track {
    flex: 1;
    height: 24px;
    background: var(--tg-separator);
    border-radius: 6px;
    overflow: hidden;
}

.bee-chart-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-light));
    border-radius: 6px;
    transition: width 0.8s ease;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 8px;
    min-width: fit-content;
}

.bee-chart-bar-value {
    font-size: 11px;
    font-weight: 700;
    color: var(--accent-text);
    white-space: nowrap;
}

/* ── List ──────────────────────────────────── */

.bee-list {
    display: flex;
    flex-direction: column;
}

.bee-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--tg-separator);
}

.bee-list-item:last-child { border-bottom: none; }

.bee-list-icon {
    font-size: 24px;
    flex-shrink: 0;
    width: 36px;
    text-align: center;
}

.bee-list-content {
    flex: 1;
    min-width: 0;
}

.bee-list-title {
    font-size: var(--font-size-base);
    font-weight: 500;
}

.bee-list-subtitle {
    font-size: var(--font-size-sm);
    color: var(--tg-hint);
    margin-top: 2px;
}

.bee-list-right {
    flex-shrink: 0;
    text-align: right;
}

/* ── Medal (hex-shaped) ────────────────────── */

.bee-medal {
    width: 48px;
    height: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    font-weight: 800;
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    flex-shrink: 0;
}

.bee-medal--gold   { background: linear-gradient(135deg, var(--medal-gold), #FFA000);   color: #1A1A1A; }
.bee-medal--silver { background: linear-gradient(135deg, var(--medal-silver), #9E9E9E); color: #1A1A1A; }
.bee-medal--bronze { background: linear-gradient(135deg, var(--medal-bronze), #8D6E63); color: #fff; }
.bee-medal--rank   { background: var(--tg-separator); color: var(--tg-hint); font-size: 14px; }

/* ── Prediction options ────────────────────── */

.bee-option {
    display: block;
    width: 100%;
    padding: 14px;
    background: var(--tg-bg);
    border: 2px solid var(--tg-separator);
    border-radius: var(--radius-md);
    text-align: left;
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
    margin-bottom: 8px;
    font-family: var(--font);
    color: var(--tg-text);
    -webkit-tap-highlight-color: transparent;
}

.bee-option:active { transform: scale(0.98); }

.bee-option.selected {
    border-color: var(--accent);
    background: var(--accent-glow);
    box-shadow: 0 0 12px var(--accent-glow);
}

.bee-option-text {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: 8px;
}

.bee-option-code {
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
    margin-left: 4px;
    font-weight: 400;
}

.bee-option-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
    margin-top: 4px;
}

.bee-option-multiplier {
    font-weight: 700;
    color: var(--accent);
    font-size: 14px;
}

/* ── Range slider ──────────────────────────── */

.bee-range {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: var(--tg-separator);
    border-radius: 3px;
    outline: none;
}

.bee-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px var(--accent-shadow);
    border: 3px solid var(--tg-bg);
}

.bee-range::-moz-range-thumb {
    width: 24px;
    height: 24px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px var(--accent-shadow);
    border: 3px solid var(--tg-bg);
}

/* ── Amount input group ────────────────────── */

.bee-amount-group {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 12px 0;
}

.bee-amount-group .bee-range { flex: 1; }

.bee-amount-group .bee-input {
    width: 80px;
    text-align: center;
    font-weight: 600;
    flex-shrink: 0;
    padding: 10px 8px;
}

/* ── Leaderboard ───────────────────────────── */

.bee-podium {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 8px;
    padding: 20px 0 10px;
}

.bee-podium-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    flex: 1;
    max-width: 120px;
}

.bee-podium-item:nth-child(1) { order: 2; }
.bee-podium-item:nth-child(2) { order: 1; }
.bee-podium-item:nth-child(3) { order: 3; }

.bee-podium-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

.bee-podium-value {
    font-size: var(--font-size-xs);
    color: var(--accent);
    font-weight: 600;
}

.bee-rank-list {
    display: flex;
    flex-direction: column;
}

.bee-rank-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--tg-separator);
}

.bee-rank-item:last-child { border-bottom: none; }

.bee-rank-item.highlighted {
    background: var(--accent-glow);
    margin: 0 calc(var(--spacing) * -1);
    padding: 10px var(--spacing);
    border-radius: var(--radius-sm);
}

.bee-rank-pos {
    width: 28px;
    text-align: center;
    font-size: 14px;
    font-weight: 600;
    color: var(--tg-hint);
    flex-shrink: 0;
}

.bee-rank-name {
    flex: 1;
    font-size: var(--font-size-base);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bee-rank-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--accent);
    flex-shrink: 0;
}

/* ── Error page ────────────────────────────── */

.bee-error-page {
    text-align: center;
    padding: 32px 24px;
}

/* ── Hex pattern (subtle decoration) ───────── */

.bee-hex-bg {
    position: relative;
}

.bee-hex-bg::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.03;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='49' viewBox='0 0 28 49'%3E%3Cpath d='M13.99 9.25l13 7.5v15l-13 7.5L1 31.75v-15z' fill='none' stroke='%23FFC107' stroke-width='1'/%3E%3C/svg%3E");
    pointer-events: none;
    border-radius: inherit;
}

/* ── Animations ────────────────────────────── */

@keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to   { opacity: 0; }
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
}

@keyframes pulseHoney {
    0%, 100% { box-shadow: 0 0 0 0 var(--accent-shadow); }
    50%      { box-shadow: 0 0 0 8px rgba(255,193,7,0); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-6px); }
    40%, 80% { transform: translateX(6px); }
}

/* ── Utilities ─────────────────────────────── */

.text-accent  { color: var(--accent); }
.text-hint    { color: var(--tg-hint); }
.text-success { color: var(--success); }
.text-error   { color: var(--error); }
.text-center  { text-align: center; }
.text-right   { text-align: right; }
.fw-bold      { font-weight: 700; }
.mt-8  { margin-top: 8px; }
.mt-16 { margin-top: 16px; }
.mt-24 { margin-top: 24px; }
.mb-8  { margin-bottom: 8px; }
.mb-16 { margin-bottom: 16px; }
.hidden { display: none !important; }

/* ── Responsive ────────────────────────────── */

@media (max-width: 360px) {
    .bee-app { padding: 16px; }
    .bee-stat-grid { grid-template-columns: 1fr 1fr; }
    .bee-podium-item { max-width: 100px; }
    .bee-medal { width: 40px; height: 40px; font-size: 16px; }
    .bee-chart-label { flex: 0 0 60px; }
}

@media (min-width: 521px) {
    .bee-app { padding: 28px 36px; }
}

/* ══════════════════════════════════════════════
   Calendar Module
   ══════════════════════════════════════════════ */

/* ── Navigation ───────────────────────────── */

.bee-cal-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 12px;
}

.bee-cal-nav-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    text-align: center;
    flex: 1;
}

.bee-cal-nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--tg-separator);
    border: none;
    border-radius: 50%;
    font-size: 18px;
    color: var(--tg-text);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s;
    flex-shrink: 0;
}

.bee-cal-nav-btn:active { background: var(--accent-glow); }

/* ── View toggle ──────────────────────────── */

.bee-cal-toggle {
    display: flex;
    gap: 4px;
    background: var(--tg-separator);
    border-radius: var(--radius-sm);
    padding: 3px;
}

.bee-cal-toggle-btn {
    flex: 1;
    padding: 6px 12px;
    border: none;
    border-radius: 8px;
    background: transparent;
    font-size: var(--font-size-xs);
    font-weight: 500;
    color: var(--tg-hint);
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
    font-family: var(--font);
}

.bee-cal-toggle-btn.active {
    background: var(--tg-bg);
    color: var(--tg-text);
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* ── Month grid ───────────────────────────── */

.bee-cal-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
}

.bee-cal-weekday {
    text-align: center;
    font-size: 11px;
    font-weight: 600;
    color: var(--tg-hint);
    text-transform: uppercase;
    padding: 6px 0;
    letter-spacing: 0.5px;
}

.bee-cal-day {
    aspect-ratio: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 3px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s, box-shadow 0.15s;
    min-height: 44px;
    position: relative;
    font-size: 14px;
    font-weight: 500;
    color: var(--tg-text);
}

.bee-cal-day:active { transform: scale(0.95); }

.bee-cal-day--other {
    color: var(--tg-hint);
    opacity: 0.35;
}

.bee-cal-day--today {
    background: var(--accent);
    color: var(--accent-text);
    font-weight: 700;
    border-radius: 50%;
}

.bee-cal-day--today .bee-cal-dot { background: var(--accent-text); }

.bee-cal-day--selected {
    box-shadow: inset 0 0 0 2px var(--accent);
    border-radius: var(--radius-sm);
}

.bee-cal-day--today.bee-cal-day--selected {
    box-shadow: 0 0 0 2px var(--accent), 0 0 8px var(--accent-glow);
}

/* ── Event dots ───────────────────────────── */

.bee-cal-dots {
    display: flex;
    gap: 2px;
    justify-content: center;
    min-height: 6px;
}

.bee-cal-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--accent);
}

/* ── Day detail panel ─────────────────────── */

.bee-cal-detail {
    animation: slideUp var(--anim-duration) ease;
}

.bee-cal-detail-header {
    font-size: var(--font-size-base);
    font-weight: 600;
    padding: 4px 0 8px;
    color: var(--tg-hint);
}

.bee-cal-empty {
    text-align: center;
    padding: 24px;
    color: var(--tg-hint);
    font-size: var(--font-size-sm);
}

/* ── Event card v5 — 2-zone compact ──────── */

.bee-cal-event {
    display: flex;
    gap: 0;
    padding: 0;
    margin-bottom: 8px;
    align-items: stretch;
    background: var(--tg-bg);
    border-radius: var(--radius-sm);
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(0, 0, 0, 0.04);
    transition: box-shadow 0.2s, transform 0.15s;
}

.bee-cal-event:last-child { margin-bottom: 0; }

.bee-cal-event-priority {
    width: 4px;
    min-height: 100%;
    flex-shrink: 0;
    align-self: stretch;
    transition: width 0.15s;
}
.bee-cal-event-priority--high { width: 6px; }

.bee-cal-event-body {
    flex: 1;
    min-width: 0;
    padding: 8px 12px;
    display: flex;
    flex-direction: column;
    gap: 3px;
}

/* Zone A: head — icon/emoji + title + status + time */
.bee-cal-event-head {
    display: flex;
    align-items: center;
    gap: 6px;
}

.bee-cal-event-head .bee-cal-event-title {
    flex: 1;
    min-width: 0;
}

.bee-cal-event-head .bee-cal-event-time {
    margin-left: auto;
    flex-shrink: 0;
    margin-bottom: 0;
}

.bee-cal-event-time {
    font-size: 12px;
    color: var(--tg-hint);
    font-variant-numeric: tabular-nums;
}

.bee-cal-event-title {
    font-size: var(--font-size-base);
    font-weight: 600;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.4;
}

.bee-cal-event-title--done {
    text-decoration: line-through;
    opacity: 0.6;
}

/* Компактная иконка статуса рядом с заголовком */
.bee-cal-event-status-icon {
    font-size: 11px;
    flex-shrink: 0;
    line-height: 1;
}
.bee-cal-event-status-icon--done { color: #10B981; }
.bee-cal-event-status-icon--cancelled { color: #EF4444; opacity: 0.7; }

.bee-cal-event-desc {
    font-size: var(--font-size-sm);
    color: var(--tg-hint);
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}

/* Zone B: context — avatars + tags + type badge */
.bee-cal-event-ctx {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 2px;
    overflow: hidden;
}

/* Компактные теги (max 3 + overflow) */
.bee-cal-event-tags-compact {
    display: flex;
    align-items: center;
    gap: 3px;
    overflow: hidden;
    flex-shrink: 1;
    min-width: 0;
}

.bee-cal-event-tags-compact .bee-cal-event-tag {
    font-size: 11px;
    padding: 1px 6px;
    border-radius: 4px;
    background: rgba(255,255,255,0.06);
    white-space: nowrap;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    flex-shrink: 0;
}
.bee-cal-event-tags-compact .bee-cal-event-tag:active { transform: scale(0.92); }

.bee-cal-event-tag-more {
    font-size: 10px;
    color: var(--tg-hint);
    padding: 1px 5px;
    border-radius: 4px;
    background: var(--tg-separator);
    white-space: nowrap;
    flex-shrink: 0;
}

.bee-cal-event-actions {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
    align-self: center;
    padding-right: 8px;
}

.bee-cal-event-action {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: var(--tg-separator);
    border-radius: 50%;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.15s, transform 0.1s;
}

.bee-cal-event-action:active {
    background: var(--accent-glow);
    transform: scale(0.9);
}

/* ── Chain (linked events) ────────────────── */

.bee-cal-chain {
    position: relative;
    padding-left: 18px;
}

.bee-cal-chain::before {
    content: '';
    position: absolute;
    left: 6px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--accent);
    opacity: 0.3;
    border-radius: 1px;
}

.bee-cal-chain-link {
    font-size: var(--font-size-xs);
    color: var(--accent);
    cursor: pointer;
    margin-top: 4px;
}

/* ── Filters ──────────────────────────────── */

.bee-cal-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 12px;
}

.bee-cal-tag {
    padding: 4px 10px;
    border-radius: 12px;
    border: 1px solid var(--tg-separator);
    background: transparent;
    font-size: var(--font-size-xs);
    color: var(--tg-text);
    cursor: pointer;
    transition: all 0.15s;
    font-family: var(--font);
}

.bee-cal-tag:active { transform: scale(0.95); }

.bee-cal-tag--active {
    background: var(--accent);
    color: var(--accent-text);
    border-color: var(--accent);
    font-weight: 600;
}

/* ── FAB (admin add button) ───────────────── */

.bee-cal-fab {
    position: fixed;
    bottom: max(24px, env(safe-area-inset-bottom, 24px));
    right: 24px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-light));
    color: var(--accent-text);
    border: none;
    font-size: 28px;
    font-weight: 300;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 16px var(--accent-shadow);
    z-index: 100;
    transition: transform 0.15s, box-shadow 0.15s;
    -webkit-tap-highlight-color: transparent;
}

.bee-cal-fab:active {
    transform: scale(0.9);
    box-shadow: 0 2px 8px var(--accent-shadow);
}

/* ── Modal (admin create/edit) ────────────── */

.bee-cal-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 200;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    animation: fadeIn 0.2s ease;
}

.bee-cal-modal {
    background: var(--tg-bg);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    width: 100%;
    max-width: 520px;
    max-height: 85vh;
    overflow-y: auto;
    padding: var(--page-pad);
    animation: slideUp 0.3s ease;
}

.bee-cal-modal-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    margin-bottom: 16px;
}

/* ── List view date header ────────────────── */

.bee-cal-date-header {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--tg-hint);
    padding: 12px 0 4px;
    border-bottom: 1px solid var(--tg-separator);
    margin-bottom: 4px;
}

/* ── AI actionable indicator ──────────────── */

.bee-cal-ai-off {
    opacity: 0.5;
    position: relative;
}

.bee-cal-ai-badge {
    font-size: 9px;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--tg-separator);
    color: var(--tg-hint);
    font-weight: 600;
    white-space: nowrap;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* ── Clickable event card ────────────────── */

.bee-cal-event--clickable {
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: box-shadow 0.2s, transform 0.15s;
}

.bee-cal-event--clickable:active {
    transform: scale(0.98);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

/* ── Status modifiers on event card ──────── */

.bee-cal-event--done { opacity: 0.55; }
.bee-cal-event--cancelled { opacity: 0.4; }

/* ── Type-specific card backgrounds ──────── */

.bee-cal-event--trigger {
    background: linear-gradient(135deg, rgba(245,158,11,0.06) 0%, var(--tg-bg) 100%);
}

.bee-cal-event--monitor {
    background: linear-gradient(135deg, rgba(59,130,246,0.06) 0%, var(--tg-bg) 100%);
}

.bee-cal-event--task {
    background: linear-gradient(135deg, rgba(16,185,129,0.06) 0%, var(--tg-bg) 100%);
}

.bee-cal-event--vote {
    background: linear-gradient(135deg, rgba(139,92,246,0.06) 0%, var(--tg-bg) 100%);
}

.bee-cal-event--routine {
    background: linear-gradient(135deg, rgba(107,114,128,0.06) 0%, var(--tg-bg) 100%);
}

/* ── Chat header with avatar ─────────────── */

.bee-cal-header {
    display: flex;
    align-items: center;
    gap: 12px;
}

.bee-cal-header-text {
    flex: 1;
    min-width: 0;
}

.bee-cal-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-light));
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
}

.bee-cal-avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.bee-cal-avatar-initials {
    font-size: 18px;
    font-weight: 700;
    color: var(--accent-text);
}

/* ── Event tag in card (clickable) ───────── */

.bee-cal-event-tag {
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

.bee-cal-event-tag:active {
    transform: scale(0.92);
}

/* ── Search button + overlay ─────────────── */

.bee-cal-search-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 10px 14px;
    background: var(--tg-bg);
    border: 1.5px solid var(--tg-separator);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    color: var(--tg-hint);
    cursor: pointer;
    margin: 10px 0;
    font-family: var(--font);
    -webkit-tap-highlight-color: transparent;
    transition: border-color 0.15s;
}

.bee-cal-search-btn:active { border-color: var(--accent); }

.bee-cal-search-overlay {
    position: fixed;
    inset: 0;
    z-index: 300;
    background: var(--tg-bg);
    overflow-y: auto;
    padding: var(--page-pad);
    padding-top: max(var(--page-pad), env(safe-area-inset-top, 12px));
    animation: slideUp 0.25s ease;
}

.bee-cal-search-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
}

.bee-cal-search-header .bee-input { flex: 1; }

.bee-cal-search-close {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--tg-separator);
    border-radius: 50%;
    font-size: 18px;
    color: var(--tg-text);
    cursor: pointer;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.bee-cal-search-section { margin-bottom: 16px; }

.bee-cal-search-section-title {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--tg-hint);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.bee-cal-search-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.bee-cal-search-pill {
    padding: 6px 12px;
    border-radius: 16px;
    border: 1.5px solid var(--tg-separator);
    background: transparent;
    font-size: var(--font-size-xs);
    font-weight: 500;
    color: var(--tg-text);
    cursor: pointer;
    font-family: var(--font);
    -webkit-tap-highlight-color: transparent;
    transition: all 0.15s;
}

.bee-cal-search-pill--active {
    background: var(--accent);
    color: var(--accent-text);
    border-color: var(--accent);
    font-weight: 600;
}

.bee-cal-search-tags {
    display: flex;
    flex-direction: column;
    gap: 2px;
    max-height: 200px;
    overflow-y: auto;
}

.bee-cal-search-tag-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 8px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

.bee-cal-search-tag-item:active { background: var(--accent-glow); }

.bee-cal-search-tag-check {
    width: 18px;
    height: 18px;
    border: 2px solid var(--tg-hint);
    border-radius: 4px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: transparent;
    transition: all 0.15s;
}

.bee-cal-search-tag-item--active .bee-cal-search-tag-check {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--accent-text);
}

.bee-cal-search-actions {
    display: flex;
    gap: 8px;
    margin-top: 20px;
}

.bee-cal-search-actions .bee-btn { flex: 1; }

.bee-cal-search-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    border-radius: 10px;
    background: var(--accent);
    color: var(--accent-text);
    font-size: 11px;
    font-weight: 700;
    padding: 0 5px;
    margin-left: auto;
}

/* ── Full-screen event detail ────────────── */

.bee-cal-fulldetail {
    position: fixed;
    inset: 0;
    z-index: 250;
    background: var(--tg-bg);
    overflow-y: auto;
    animation: slideUp 0.25s ease;
}

.bee-cal-fulldetail-bar {
    height: 4px;
    width: 100%;
}

.bee-cal-fulldetail-content {
    padding: var(--page-pad);
    padding-top: 12px;
    padding-bottom: max(calc(var(--page-pad) + 20px), env(safe-area-inset-bottom, 20px));
    max-width: 520px;
    margin: 0 auto;
}

.bee-cal-fulldetail-close {
    position: fixed;
    top: max(12px, env(safe-area-inset-top, 12px));
    right: 16px;
    width: 36px;
    height: 36px;
    border: none;
    background: var(--tg-section-bg);
    border-radius: 50%;
    font-size: 18px;
    color: var(--tg-text);
    cursor: pointer;
    z-index: 251;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.bee-cal-fulldetail-header {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 8px;
    padding-right: 44px;
}

.bee-cal-fulldetail-emoji {
    font-size: 40px;
    line-height: 1;
    flex-shrink: 0;
}

.bee-cal-fulldetail-title {
    font-size: var(--font-size-xl);
    font-weight: 700;
    line-height: 1.3;
    flex: 1;
    word-break: break-word;
}

.bee-cal-fulldetail-badges {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    margin-bottom: 8px;
}

.bee-cal-fulldetail-time {
    font-size: var(--font-size-base);
    color: var(--tg-hint);
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.bee-cal-fulldetail-desc {
    font-size: var(--font-size-base);
    color: var(--tg-text);
    line-height: 1.7;
    white-space: pre-wrap;
}

.bee-cal-fulldetail-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 16px;
}

.bee-cal-fulldetail-creator {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: var(--tg-section-bg);
    border-radius: var(--radius-sm);
}

.bee-cal-creator-ava {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
    color: #fff;
}

.bee-cal-creator-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.bee-cal-creator-type {
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
}

.bee-cal-fulldetail-meta {
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
    line-height: 1.8;
    margin-bottom: 16px;
}

.bee-cal-fulldetail-actions {
    display: flex;
    gap: 8px;
    margin-top: 20px;
}

.bee-cal-fulldetail-actions .bee-btn { flex: 1; }

/* ── v5: Fulldetail collapsible sections ─── */

.bee-fd-section {
    border-bottom: 1px solid var(--tg-separator);
}
.bee-fd-section.hidden { display: none; }

.bee-fd-section__header {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 12px 0;
    border: none;
    background: transparent;
    color: var(--tg-text);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--font);
}
.bee-fd-section__header:active { opacity: 0.7; }

.bee-fd-section__icon {
    font-size: 16px;
    flex-shrink: 0;
    line-height: 1;
}

.bee-fd-section__title { flex: 1; text-align: left; }

.bee-fd-section__count {
    font-size: 11px;
    color: var(--tg-hint);
    background: var(--tg-separator);
    padding: 1px 6px;
    border-radius: 8px;
    font-weight: 500;
}

.bee-fd-section__chevron {
    font-size: 12px;
    color: var(--tg-hint);
    transition: transform 0.2s ease;
    flex-shrink: 0;
}
.bee-fd-section__header[aria-expanded="true"] .bee-fd-section__chevron {
    transform: rotate(180deg);
}

.bee-fd-section__body {
    padding-bottom: 12px;
}

/* Фиксированная (не сворачиваемая) секция fulldetail */
.bee-fd-fixed {
    padding: 8px 0 12px;
    border-bottom: 1px solid var(--tg-separator);
}

/* Теги в fulldetail — скролл при переполнении */
.bee-fd-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    max-height: 120px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* Виджеты в fulldetail */
.bee-fd-widgets {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

/* JSON блоки в fulldetail (действие/результат) */
.bee-fd-json {
    font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
    font-size: 12px;
    line-height: 1.5;
    padding: 10px 12px;
    border-radius: var(--radius-sm);
    background: var(--tg-secondary-bg);
    color: var(--tg-text);
    overflow-x: auto;
    white-space: pre-wrap;
    word-break: break-word;
    max-height: 200px;
    overflow-y: auto;
}
.bee-fd-json--success { border-left: 3px solid #10B981; }
.bee-fd-json--failed  { border-left: 3px solid #EF4444; }

/* Метаданные в fulldetail */
.bee-fd-meta {
    font-size: var(--font-size-xs);
    color: var(--tg-hint);
    line-height: 1.8;
}

/* Emoji picker ────────────────────────── */

.bee-cal-emoji-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 400;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    animation: fadeIn 0.15s ease;
}

.bee-cal-emoji-sheet {
    background: var(--tg-bg);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    width: 100%;
    max-width: 520px;
    max-height: 55vh;
    overflow-y: auto;
    padding: 16px;
    animation: slideUp 0.25s ease;
}

.bee-cal-emoji-cat {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--tg-hint);
    margin: 10px 0 4px;
}

.bee-cal-emoji-cat:first-child { margin-top: 0; }

.bee-cal-emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 2px;
}

.bee-cal-emoji-item {
    width: 100%;
    aspect-ratio: 1;
    border: none;
    background: transparent;
    font-size: 22px;
    cursor: pointer;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.1s;
}

.bee-cal-emoji-item:active { background: var(--accent-glow); }

.bee-cal-emoji-clear {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    margin-top: 8px;
    color: var(--tg-hint);
    font-size: var(--font-size-sm);
    cursor: pointer;
    border: 1px dashed var(--tg-separator);
    border-radius: var(--radius-sm);
}

/* ── User profile in header ──────────────── */

.bee-cal-user-mini {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;
    flex-shrink: 0;
    background: var(--tg-separator);
    display: flex;
    align-items: center;
    justify-content: center;
}

.bee-cal-user-mini img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.bee-cal-user-mini-fallback {
    font-size: 13px;
    font-weight: 700;
    color: var(--tg-hint);
}

/* ── v5: Emoji/Icon inline (shared for head row) ── */

.bee-cal-event-emoji-inline {
    font-size: 18px;
    line-height: 1;
    flex-shrink: 0;
}
.bee-cal-event-icon-inline {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border-radius: 5px;
    flex-shrink: 0;
}
.bee-cal-event-icon-inline img {
    filter: brightness(0) invert(1);
}

.bee-cal-event-avatars {
    display: flex;
    align-items: center;
}

.bee-cal-event-ava {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    color: #fff;
    cursor: pointer;
    border: 2px solid var(--tg-bg);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: transform 0.15s;
    flex-shrink: 0;
}

.bee-cal-event-ava:active { transform: scale(0.9); }

.bee-cal-event-ava + .bee-cal-event-ava {
    margin-left: -8px;
}

/* ── v5: Simple Icons в аватарках — белые SVG на цветном фоне ── */

.bee-cal-event-ava img {
    width: 14px;
    height: 14px;
    display: block;
    filter: brightness(0) invert(1);
}

/* ── v5: Widgets — dynamic data chips (fulldetail only) ── */

.bee-cal-widget {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 6px;
    background: var(--tg-secondary-bg);
    color: var(--tg-text);
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
}

.bee-cal-widget b { font-weight: 700; }

.bee-cal-widget-change { font-size: 10px; }

.bee-cal-widget--up .bee-cal-widget-change { color: #10B981; }
.bee-cal-widget--down .bee-cal-widget-change { color: #EF4444; }

.bee-cal-widget--price { border-left: 2px solid #F59E0B; }
.bee-cal-widget--rate  { border-left: 2px solid #3B82F6; }
.bee-cal-widget--result { border-left: 2px solid var(--tg-hint); }

/* v4: Simple Icons в виджетах — цветные SVG */
.bee-cal-widget-icon {
    width: 12px;
    height: 12px;
    vertical-align: -1px;
    flex-shrink: 0;
}

/* ── v5: Urgency pulse for soon-to-fire triggers ── */

.bee-cal-event--urgent {
    animation: urgentPulse 2s ease-in-out infinite;
    box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.3);
}

@keyframes urgentPulse {
    0%, 100% { box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.2), 0 1px 3px rgba(0, 0, 0, 0.06); }
    50% { box-shadow: 0 0 8px 2px rgba(245, 158, 11, 0.25), 0 1px 3px rgba(0, 0, 0, 0.06); }
}

/* ── Calendar v3: Trigger status badge ─────── */

.bee-cal-trigger-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: 10px;
    padding: 2px 7px;
    border-radius: 6px;
    font-weight: 600;
    white-space: nowrap;
    background: var(--tg-separator);
    color: var(--tg-hint);
    letter-spacing: 0.01em;
}
.bee-cal-trigger-badge--success { background: #dcfce7; color: #166534; }
.bee-cal-trigger-badge--failed  { background: #fee2e2; color: #991b1b; }
.bee-cal-trigger-badge--fired   { background: #dbeafe; color: #1e40af; }
.bee-cal-trigger-badge--scheduled { background: #f3e8ff; color: #6b21a8; }
.bee-cal-trigger-badge--skipped { background: var(--tg-separator); color: var(--tg-hint); }
.bee-cal-trigger-badge--expired { background: var(--tg-separator); color: var(--tg-hint); opacity: 0.6; }

/* ── Calendar v3: Cost badge ───────────────── */

.bee-cal-cost-badge {
    display: inline-flex;
    align-items: center;
    font-size: 10px;
    padding: 2px 7px;
    border-radius: 6px;
    background: #fef3c7;
    color: #92400e;
    font-weight: 700;
    white-space: nowrap;
    font-family: 'SF Mono', 'Fira Code', monospace;
    letter-spacing: 0.02em;
}

/* ── Calendar v3: Source module badge ──────── */

.bee-cal-source-badge {
    display: inline-flex;
    align-items: center;
    font-size: 10px;
    padding: 2px 7px;
    border-radius: 6px;
    background: var(--tg-separator);
    color: var(--tg-hint);
    font-weight: 500;
    white-space: nowrap;
}

/* ── Calendar v3: Fulldetail trigger/action/result blocks ── */

.bee-cal-fulldetail-trigger {
    font-size: 14px;
    padding: 10px 0;
    border-bottom: 1px solid var(--tg-separator);
    line-height: 1.5;
}

.bee-cal-fulldetail-action,
.bee-cal-fulldetail-result {
    padding: 10px 0;
    border-bottom: 1px solid var(--tg-separator);
}

.bee-cal-action-block,
.bee-cal-result-block {
    font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
    font-size: 12px;
    line-height: 1.5;
    padding: 10px 12px;
    border-radius: var(--radius-sm);
    background: var(--tg-secondary-bg);
    color: var(--tg-text);
    overflow-x: auto;
    white-space: pre-wrap;
    word-break: break-word;
    max-height: 200px;
    overflow-y: auto;
}

.bee-cal-action-block-title,
.bee-cal-result-block-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--tg-hint);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* ── Calendar v3: Entry type card borders ────── */

.bee-cal-event--trigger .bee-cal-event-priority { background: #F59E0B !important; }
.bee-cal-event--monitor .bee-cal-event-priority { background: #3B82F6 !important; }
.bee-cal-event--task .bee-cal-event-priority    { background: #10B981 !important; }
.bee-cal-event--vote .bee-cal-event-priority    { background: #8B5CF6 !important; }
.bee-cal-event--routine .bee-cal-event-priority { background: #6B7280 !important; }

/* ── Calendar v3: Tick info badge ────────────── */

.bee-cal-tick-info {
    font-size: 11px;
    color: var(--tg-hint);
    margin-top: 5px;
    padding: 3px 8px;
    background: rgba(59, 130, 246, 0.06);
    border-radius: 4px;
    font-variant-numeric: tabular-nums;
    display: inline-block;
    border-left: 2px solid #3B82F6;
}

/* ── Calendar v3: Fulldetail type card ───────── */

.bee-cal-fulldetail-type-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border-radius: var(--radius-sm);
    margin-bottom: 12px;
    border-left: 4px solid var(--accent);
}

.bee-cal-fulldetail-type-card-icon {
    font-size: 24px;
    line-height: 1;
    flex-shrink: 0;
}

.bee-cal-fulldetail-type-card-body {
    flex: 1;
    min-width: 0;
}

.bee-cal-fulldetail-type-card-label {
    font-size: 14px;
    font-weight: 600;
}

.bee-cal-fulldetail-type-card-status {
    font-size: 12px;
    margin-top: 2px;
}

/* ── Calendar v3: Info row (key: value) ──────── */

.bee-cal-fulldetail-info-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    padding: 6px 0;
    color: var(--tg-text);
}

.bee-cal-fulldetail-info-row-icon {
    flex-shrink: 0;
    font-size: 16px;
}

.bee-cal-fulldetail-info-row-label {
    color: var(--tg-hint);
    font-size: 13px;
    min-width: 70px;
}

.bee-cal-fulldetail-info-row-value {
    font-weight: 500;
    flex: 1;
}

/* ── Calendar v3: Result block variants ──────── */

.bee-cal-result-block--success {
    border-left: 3px solid #10B981;
}

.bee-cal-result-block--failed {
    border-left: 3px solid #EF4444;
}

/* ── Calendar v3: Trigger-at display ─────────── */

.bee-cal-fulldetail-trigger-at {
    font-size: 15px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
}

/* ── Calendar v3: Fulldetail tick info ────────── */

.bee-cal-fulldetail-tick-info {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--tg-hint);
    padding: 6px 0;
}

.bee-cal-fulldetail-tick-progress {
    flex: 1;
    max-width: 120px;
}

/* ── Calendar v3: Conditional form fields ────── */

.bee-cal-form-conditional {
    display: none;
    animation: slideUp 0.2s ease;
}

.bee-cal-form-conditional--visible {
    display: block;
}

/* ── Calendar v3: Filter pill type colors ────── */

.bee-cal-search-pill[data-val="trigger"] { border-color: #F59E0B; }
.bee-cal-search-pill[data-val="monitor"] { border-color: #3B82F6; }
.bee-cal-search-pill[data-val="task"]    { border-color: #10B981; }
.bee-cal-search-pill[data-val="event"]   { border-color: #FFC107; }

.bee-cal-search-pill--active[data-val="trigger"] { background: #F59E0B; border-color: #F59E0B; }
.bee-cal-search-pill--active[data-val="monitor"] { background: #3B82F6; border-color: #3B82F6; color: #fff; }
.bee-cal-search-pill--active[data-val="task"]    { background: #10B981; border-color: #10B981; color: #fff; }
.bee-cal-search-pill--active[data-val="event"]   { background: #FFC107; border-color: #FFC107; }

/* ── Calendar v3: Fulldetail cost+source row ─── */

.bee-cal-fulldetail-cost-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    padding: 6px 0 0;
}

/* ══════════════════════════════════════════════════════════
   Bee Bar — Compact Sticky Header (liquid glass)
   ══════════════════════════════════════════════════════════ */

.bee-bar {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    min-height: 44px;
    background: transparent;
    border: none;
    pointer-events: none;
}
.bee-bar > * {
    pointer-events: auto;
}
.bee-bar.scrolled {
    box-shadow: none;
}

/* Glass layers на pill (.bee-bar__center) */
.bee-bar__center > .bee-glass-tint     { z-index: 0; }
.bee-bar__center > .bee-glass-specular { z-index: 1; }
.bee-bar__center > .bee-glass-refract  { z-index: -1; }
.bee-bar__center > .bee-bar__avatar,
.bee-bar__center > .bee-bar__name {
    position: relative;
    z-index: 2;
}

/* Слот: левый */
.bee-bar__left {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 6px;
}

.bee-bar__back {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(128, 128, 128, 0.12);
    color: var(--tg-text);
    text-decoration: none;
    font-size: 18px;
    font-weight: 300;
    line-height: 1;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s;
}
.bee-bar__back:active {
    background: rgba(128, 128, 128, 0.25);
}

/* Слот: центр — pill (аватар + имя) */
.bee-bar__center {
    flex: 0 1 auto;
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 36px;
    overflow: hidden;
    padding: 4px 14px 4px 4px;
    border-radius: 20px;
    background: var(--frosted-bg);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    position: relative;
    transition: background 0.2s ease;
}
.bee-bar__center[data-bee-glass] {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    background: transparent;
}

.bee-bar__avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--accent);
    color: var(--accent-text);
    font-size: 13px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
}

.bee-bar__name {
    font-size: 15px;
    font-weight: 600;
    line-height: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--tg-text);
    max-width: 180px;
}

/* Слот: правый */
.bee-bar__right {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 6px;
}

.bee-bar__action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--frosted-bg);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    color: var(--tg-text);
    text-decoration: none;
    font-size: 14px;
    border: none;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s;
    position: relative;
    overflow: hidden;
}
.bee-bar__action[data-bee-glass] {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    background: transparent;
}
.bee-bar__action svg {
    display: block;
}
.bee-bar__action:active {
    background: rgba(128, 128, 128, 0.25);
}


/* ══════════════════════════════════════════════════════════
   Hub v2 — Главный экран Mini App (карточки-список)
   ══════════════════════════════════════════════════════════ */

/* ── Шапка ── */
.bee-hub-header {
    padding: 20px 16px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.bee-hub-profile {
    display: flex;
    align-items: center;
    gap: 12px;
}

.bee-hub-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: var(--tg-theme-button-color, #FFC107);
    color: var(--tg-theme-button-text-color, #fff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 600;
    flex-shrink: 0;
}

.bee-hub-user-name {
    font-size: 17px;
    font-weight: 600;
    color: var(--tg-text);
}

.bee-hub-roles {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 2px;
}

.bee-hub-role-badge {
    font-size: 11px;
    padding: 1px 6px;
    border-radius: 4px;
    background: var(--tg-theme-button-color, #FFC107);
    color: var(--tg-theme-button-text-color, #fff);
    opacity: 0.85;
}

.bee-hub-stats {
    font-size: 13px;
    color: var(--tg-hint);
    white-space: nowrap;
}

/* ── Промо-баннер ── */
.bee-promo {
    display: flex;
    align-items: center;
    position: relative;
    margin: 18px 20px;
    padding: 14px 16px;
    border-radius: 16px;
    overflow: hidden;
    text-decoration: none;
    color: var(--tg-text);
    background: var(--card-bg);
    border: 1px solid var(--glass-border);
    -webkit-tap-highlight-color: transparent;
    transition: transform 0.15s, box-shadow 0.15s;
}
.bee-promo:active {
    transform: scale(0.98);
}

.bee-promo__bg {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-size: cover;
    background-position: center;
    filter: blur(30px) saturate(180%);
    opacity: 0.25;
    z-index: 0;
}

.bee-promo__content {
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    z-index: 1;
    flex: 1;
    min-width: 0;
}

.bee-promo__avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    flex-shrink: 0;
    object-fit: cover;
}
.bee-promo__avatar--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--accent);
    color: var(--accent-text);
    font-weight: 700;
    font-size: 18px;
}

.bee-promo__text {
    flex: 1;
    min-width: 0;
}
.bee-promo__title {
    font-size: 14px;
    font-weight: 600;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.bee-promo__username {
    font-size: 12px;
    color: var(--tg-hint);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bee-promo__arrow {
    font-size: 20px;
    color: var(--tg-hint);
    flex-shrink: 0;
    position: relative;
    z-index: 1;
}

.bee-promo__close {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 24px;
    height: 24px;
    border: none;
    border-radius: 50%;
    background: rgba(128, 128, 128, 0.2);
    color: var(--tg-hint);
    font-size: 14px;
    line-height: 1;
    cursor: pointer;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
}
.bee-promo__close:active {
    background: rgba(128, 128, 128, 0.4);
}

/* ── Поиск + кнопка фильтров ── */
.bee-hub-search-row {
    display: flex;
    gap: 10px;
    padding: 20px 20px 18px;
    align-items: center;
}

/* Обёртка поиска для liquid glass */
.bee-hub-search-wrap {
    flex: 1;
    position: relative;
    border-radius: var(--radius-md);
    background: var(--frosted-bg);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: 1px solid var(--glass-border);
    overflow: hidden;
    transition: border-color 0.15s, box-shadow 0.15s;
}
.bee-hub-search-wrap[data-bee-glass] {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    background: transparent;
}
.bee-hub-search-wrap:focus-within {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent-glow);
}

.bee-hub-search {
    position: relative;
    z-index: 2;
    width: 100%;
    padding: 10px 14px;
    border-radius: var(--radius-md);
    border: none;
    background: transparent;
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    color: var(--tg-text);
    font-size: 15px;
    outline: none;
    box-sizing: border-box;
    -webkit-appearance: none;
}

.bee-hub-filter-toggle {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    border: 1px solid var(--glass-border);
    background: var(--frosted-bg);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    color: var(--tg-text);
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    flex-shrink: 0;
    -webkit-tap-highlight-color: transparent;
    overflow: hidden;
}
.bee-hub-filter-toggle[data-bee-glass] {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    background: transparent;
}
.bee-hub-filter-toggle > span,
.bee-hub-filter-toggle > svg {
    position: relative;
    z-index: 2;
}

.bee-hub-filter-toggle:active {
    transform: scale(0.92);
}

.bee-hub-filter-count {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 16px;
    height: 16px;
    border-radius: 8px;
    background: var(--accent);
    color: var(--accent-text);
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
}

/* ── Фильтры ── */
.bee-hub-filters {
    padding: 0 20px 18px;
    overflow: hidden;
    max-height: 500px;
    transition: max-height 0.3s ease, padding 0.3s ease;
}

.bee-hub-filters.collapsed {
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
}

.bee-hub-filter-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--tg-hint);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
    margin-top: 8px;
}

.bee-hub-filter-label:first-child {
    margin-top: 0;
}

.bee-hub-filter-row {
    display: flex;
    gap: 6px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding: 2px 0 6px;
}

.bee-hub-filter-row::-webkit-scrollbar {
    display: none;
}

.bee-hub-pill {
    font-size: 12px;
    padding: 5px 12px;
    border-radius: 16px;
    border: 1px solid var(--glass-border);
    background: var(--frosted-bg);
    -webkit-backdrop-filter: blur(10px) saturate(150%);
    backdrop-filter: blur(10px) saturate(150%);
    color: var(--tg-text);
    white-space: nowrap;
    cursor: pointer;
    flex-shrink: 0;
    font-family: var(--font);
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s, border-color 0.15s, transform 0.1s;
}

.bee-hub-pill:active {
    transform: scale(0.95);
}

.bee-hub-pill.active {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--accent-text);
    font-weight: 600;
}

/* ── Список карточек (edge-to-edge) ── */
.bee-hub-list {
    padding: 0;
}

/* ── Карточка (edge-to-edge, transparent, separator) ── */
.bee-hub-card {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px 16px;
    background: transparent;
    border: none;
    border-bottom: 0.5px solid var(--tg-separator);
    margin-bottom: 0;
    text-decoration: none;
    color: var(--tg-text);
    position: relative;
    transition: background-color 0.15s ease;
    -webkit-tap-highlight-color: transparent;
    animation: fadeIn var(--anim-duration) ease backwards;
}
.bee-hub-card:last-child { border-bottom: none; }
.bee-hub-card:active { background: var(--tg-separator); }

/* Stagger анимация */
.bee-hub-card:nth-child(1) { animation-delay: 0s; }
.bee-hub-card:nth-child(2) { animation-delay: calc(var(--anim-stagger) * 1); }
.bee-hub-card:nth-child(3) { animation-delay: calc(var(--anim-stagger) * 2); }
.bee-hub-card:nth-child(4) { animation-delay: calc(var(--anim-stagger) * 3); }
.bee-hub-card:nth-child(5) { animation-delay: calc(var(--anim-stagger) * 4); }
.bee-hub-card:nth-child(6) { animation-delay: calc(var(--anim-stagger) * 5); }

/* ── Визуальная панель (30% — орбитальная система эмодзи) ── */
.bee-hub-card__visual {
    width: 100px;
    height: 100px;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
}
.bee-hub-card__visual-bg { display: none; }
.bee-hub-card__visual-emojis {
    position: absolute;
    inset: 0;
    z-index: 2;
}

/* Orbit1 trail (conic-gradient sweep) */
.bee-hub-card__visual-emojis::before {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    width: calc(var(--orbit1-r, 22px) * 2 + 14px);
    height: calc(var(--orbit1-r, 22px) * 2 + 14px);
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: conic-gradient(
        from 0deg,
        transparent 0%,
        var(--glow-color, rgba(255,152,0,0.4)) 10%,
        transparent 25%,
        transparent 100%
    );
    -webkit-mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    animation: trailSpin var(--orbit1-period, 5s) linear infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -0.7s);
    opacity: 0.6;
    pointer-events: none;
    z-index: 0;
    display: none;
}
.bee-hub-card__visual-emojis:has(.bee-hub-card__emoji--orbit1)::before,
.bee-hub-card__visual-emojis.--has-orbit1::before { display: block; }

/* Orbit2 trail */
.bee-hub-card__visual-emojis::after {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    width: calc(var(--orbit2-r, 34px) * 2 + 10px);
    height: calc(var(--orbit2-r, 34px) * 2 + 10px);
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: conic-gradient(
        from 0deg,
        transparent 0%,
        var(--glow-color, rgba(255,152,0,0.35)) 8%,
        transparent 22%,
        transparent 100%
    );
    -webkit-mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    animation: trailSpin var(--orbit2-period, 8s) linear infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.3s);
    opacity: 0.35;
    pointer-events: none;
    z-index: 0;
    display: none;
}
.bee-hub-card__visual-emojis:has(.bee-hub-card__emoji--orbit2)::after,
.bee-hub-card__visual-emojis.--has-orbit2::after { display: block; }
.bee-hub-card__emoji {
    position: absolute;
    line-height: 1;
}

/* ── Орбитальные роли ── */

/* Звезда (ядро) — центр, мягкая пульсация */
/* По умолчанию: крупная (28px), при expand уменьшается до 20px */
.bee-hub-card__emoji--star {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: calc(28px * var(--star-scale, 1));
    z-index: 2;
    animation: starPulse 4s ease-in-out infinite;
    filter: drop-shadow(0 0 calc(4px + var(--urgency, 0) * 6px) var(--glow-color, rgba(255, 193, 7, 0.3)));
    transition: font-size 0.35s ease;
}

/* Бинарная звезда (star2) — встречная орбита */
.bee-hub-card__emoji--star2 {
    top: 50%;
    left: 50%;
    font-size: calc(20px * var(--star-scale, 1));
    z-index: 2;
    animation: binaryOrbit var(--binary-period, 3s) linear infinite;
    animation-delay: calc(var(--binary-period, 3s) / -2);
    filter: drop-shadow(0 0 4px var(--glow-color, rgba(255, 193, 7, 0.3)));
}

/* Когда есть star2, star тоже вращается по бинарной орбите */
.bee-hub-card__visual--binary .bee-hub-card__emoji--star {
    font-size: calc(22px * var(--star-scale, 1));
    animation: binaryOrbit var(--binary-period, 3s) linear infinite;
}

/* Планета (внутренняя орбита) */
.bee-hub-card__emoji--orbit1 {
    top: 50%;
    left: 50%;
    font-size: 15px;
    z-index: 1;
    --orbit-r: var(--orbit1-r);
    animation-name: orbit;
    animation-duration: var(--orbit1-period, 5s);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -0.7s);
    filter: drop-shadow(0 0 6px var(--glow-color, rgba(255, 152, 0, 0.5)));
    will-change: transform;
}

/* Спутник (внешняя орбита) */
.bee-hub-card__emoji--orbit2 {
    top: 50%;
    left: 50%;
    font-size: 12px;
    z-index: 1;
    opacity: 0.9;
    --orbit-r: var(--orbit2-r);
    animation-name: orbit;
    animation-duration: var(--orbit2-period, 8s);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.3s);
    filter: drop-shadow(0 0 5px var(--glow-color, rgba(255, 152, 0, 0.4)));
    will-change: transform;
}

/* orbit3 — 2-й на среднем кольце (orbit2-r), сдвиг 180° */
.bee-hub-card__emoji--orbit3 {
    top: 50%;
    left: 50%;
    font-size: 11px;
    z-index: 1;
    opacity: 0.85;
    --orbit-r: var(--orbit2-r);
    animation-name: orbit;
    animation-duration: var(--orbit2-period, 8s);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.3s + var(--orbit2-period, 8s) / -2);
    filter: drop-shadow(0 0 4px var(--glow-color, rgba(255, 152, 0, 0.3)));
    will-change: transform;
}

/* orbit4 — 1-й на внешнем кольце (orbit3-r) */
.bee-hub-card__emoji--orbit4 {
    top: 50%;
    left: 50%;
    font-size: 10px;
    z-index: 1;
    opacity: 0.7;
    --orbit-r: var(--orbit3-r);
    animation-name: orbit;
    animation-duration: var(--orbit3-period, 12s);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.7s);
    filter: drop-shadow(0 0 3px var(--glow-color, rgba(255, 152, 0, 0.2)));
    will-change: transform;
}

/* orbit5 — 2-й на внешнем кольце (orbit3-r), сдвиг 180° */
.bee-hub-card__emoji--orbit5 {
    top: 50%;
    left: 50%;
    font-size: 9px;
    z-index: 1;
    opacity: 0.6;
    --orbit-r: var(--orbit3-r);
    animation-name: orbit;
    animation-duration: var(--orbit3-period, 12s);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.7s + var(--orbit3-period, 12s) / -2);
    filter: drop-shadow(0 0 3px var(--glow-color, rgba(255, 152, 0, 0.2)));
    will-change: transform;
}

/* Trail для 3-го кольца (div, не pseudo-element) */
.bee-hub-card__trail--orbit3 {
    position: absolute;
    top: 50%; left: 50%;
    width: calc(var(--orbit3-r, 44px) * 2 + 8px);
    height: calc(var(--orbit3-r, 44px) * 2 + 8px);
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: conic-gradient(
        from 0deg,
        transparent 0%,
        var(--glow-color, rgba(255, 152, 0, 0.25)) 6%,
        transparent 18%,
        transparent 100%
    );
    -webkit-mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    mask: radial-gradient(circle, transparent calc(50% - 2px), black calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 2px));
    animation: trailSpin var(--orbit3-period, 12s) linear infinite;
    animation-delay: calc(var(--orbit-phase, 0) * -1.7s);
    opacity: 0.25;
    pointer-events: none;
    z-index: 0;
}

/* Аватарка чата как звезда — по умолчанию крупная (30px) */
.bee-hub-card__star-avatar {
    width: calc(30px * var(--star-scale, 1));
    height: calc(30px * var(--star-scale, 1));
    border-radius: 50%;
    object-fit: cover;
    display: block;
    transition: width 0.35s ease, height 0.35s ease;
}

/* ── Collapsed (default): орбиты скрыты, только звезда ── */
.bee-hub-card__emoji--orbit1,
.bee-hub-card__emoji--orbit2,
.bee-hub-card__emoji--orbit3,
.bee-hub-card__emoji--orbit4,
.bee-hub-card__emoji--orbit5 {
    opacity: 0;
    transition: opacity 0.4s ease;
}
.bee-hub-card__emoji--star2 { opacity: 0; transition: opacity 0.4s ease; }
.bee-hub-card__visual-emojis::before,
.bee-hub-card__visual-emojis::after { opacity: 0 !important; transition: opacity 0.4s ease 0.15s; }
.bee-hub-card__trail--orbit3 { opacity: 0 !important; transition: opacity 0.4s ease 0.2s; }

.bee-hub-card__visual-metric {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
    text-align: center;
    font-size: 10px;
    font-weight: 600;
    color: var(--tg-hint);
    padding: 1px 6px;
    background: rgba(128, 128, 128, 0.15);
    border-radius: 6px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s ease;
}
.bee-hub-card__visual-brand {
    position: absolute;
    top: 0;
    right: 0;
    width: 16px;
    height: 16px;
    z-index: 3;
    opacity: 0;
    transition: opacity 0.3s ease;
}

/* ── Expanded: hover (desktop) + .expanded (mobile touch) ── */
@media (hover: hover) {
    .bee-hub-card:hover .bee-hub-card__emoji--star {
        font-size: calc(20px * var(--star-scale, 1));
    }
    .bee-hub-card:hover .bee-hub-card__star-avatar {
        width: calc(22px * var(--star-scale, 1));
        height: calc(22px * var(--star-scale, 1));
    }
    .bee-hub-card:hover .bee-hub-card__emoji--star2 { opacity: 1; transition-delay: 0.05s; }
    .bee-hub-card:hover .bee-hub-card__emoji--orbit1 { opacity: 1; transition-delay: 0.05s; }
    .bee-hub-card:hover .bee-hub-card__emoji--orbit2 { opacity: 0.9; transition-delay: 0.1s; }
    .bee-hub-card:hover .bee-hub-card__emoji--orbit3 { opacity: 0.85; transition-delay: 0.15s; }
    .bee-hub-card:hover .bee-hub-card__emoji--orbit4 { opacity: 0.7; transition-delay: 0.2s; }
    .bee-hub-card:hover .bee-hub-card__emoji--orbit5 { opacity: 0.6; transition-delay: 0.25s; }
    .bee-hub-card:hover .bee-hub-card__visual-emojis::before { opacity: 0.6 !important; transition-delay: 0.1s; }
    .bee-hub-card:hover .bee-hub-card__visual-emojis::after { opacity: 0.35 !important; transition-delay: 0.15s; }
    .bee-hub-card:hover .bee-hub-card__trail--orbit3 { opacity: 0.25 !important; transition-delay: 0.2s; }
    .bee-hub-card:hover .bee-hub-card__visual-metric { opacity: 1; transition-delay: 0.15s; }
    .bee-hub-card:hover .bee-hub-card__visual-brand { opacity: 0.35; transition-delay: 0.15s; }
}

/* Mobile: .expanded class via JS touch */
.bee-hub-card.expanded .bee-hub-card__emoji--star {
    font-size: calc(20px * var(--star-scale, 1));
}
.bee-hub-card.expanded .bee-hub-card__star-avatar {
    width: calc(22px * var(--star-scale, 1));
    height: calc(22px * var(--star-scale, 1));
}
.bee-hub-card.expanded .bee-hub-card__emoji--star2 { opacity: 1; transition-delay: 0.05s; }
.bee-hub-card.expanded .bee-hub-card__emoji--orbit1 { opacity: 1; transition-delay: 0.05s; }
.bee-hub-card.expanded .bee-hub-card__emoji--orbit2 { opacity: 0.9; transition-delay: 0.1s; }
.bee-hub-card.expanded .bee-hub-card__emoji--orbit3 { opacity: 0.85; transition-delay: 0.15s; }
.bee-hub-card.expanded .bee-hub-card__emoji--orbit4 { opacity: 0.7; transition-delay: 0.2s; }
.bee-hub-card.expanded .bee-hub-card__emoji--orbit5 { opacity: 0.6; transition-delay: 0.25s; }
.bee-hub-card.expanded .bee-hub-card__visual-emojis::before { opacity: 0.6 !important; transition-delay: 0.1s; }
.bee-hub-card.expanded .bee-hub-card__visual-emojis::after { opacity: 0.35 !important; transition-delay: 0.15s; }
.bee-hub-card.expanded .bee-hub-card__trail--orbit3 { opacity: 0.25 !important; transition-delay: 0.2s; }
.bee-hub-card.expanded .bee-hub-card__visual-metric { opacity: 1; transition-delay: 0.15s; }
.bee-hub-card.expanded .bee-hub-card__visual-brand { opacity: 0.35; transition-delay: 0.15s; }

/* Контент */
.bee-hub-card__body {
    flex: 1;
    min-width: 0;
}

.bee-hub-card__head {
    display: flex;
    align-items: center;
    gap: 6px;
}

.bee-hub-card__title {
    font-size: 15px;
    font-weight: 600;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
    line-height: 1.3;
}

/* Статус-точка */
.bee-hub-card__status {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.bee-hub-card__status--active    { background: var(--success); }
.bee-hub-card__status--open      { background: var(--success); }
.bee-hub-card__status--closed    { background: #FFC107; }
.bee-hub-card__status--resolved  { background: var(--tg-link); }
.bee-hub-card__status--cancelled { background: var(--error); }

/* Источник */
.bee-hub-card__source {
    font-size: 12px;
    color: var(--tg-hint);
    margin-top: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Аватарка источника (чат) */
.bee-hub-card__source-avatar {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
}
.bee-hub-card__source-fallback {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--tg-hint);
    color: var(--tg-bg, #fff);
    font-size: 9px;
    font-weight: 700;
    flex-shrink: 0;
}

/* Meta-row: badge + дата снизу описания */
.bee-hub-card__meta-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 6px;
}
.bee-hub-card__date {
    font-size: 11px;
    color: var(--tg-hint);
    opacity: 0.7;
}

/* Описание */
.bee-hub-card__desc {
    font-size: 12px;
    color: var(--tg-hint);
    margin-top: 3px;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Виджеты (горизонтальная строка) */
.bee-hub-card__widgets {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
}

.bee-hub-widget {
    font-size: 11px;
    padding: 3px 8px;
    border-radius: 8px;
    background: rgba(128, 128, 128, 0.1);
    color: var(--tg-text);
    white-space: nowrap;
    line-height: 1.4;
}

.bee-hub-widget--done {
    background: rgba(76, 175, 80, 0.15);
    color: var(--success);
    font-weight: 600;
}

/* Таймер обратного отсчёта */
.bee-hub-card__countdown {
    font-size: 12px;
    color: var(--tg-hint);
    margin-top: 4px;
}

.bee-hub-card__countdown.urgent {
    color: var(--error);
    font-weight: 600;
}

.bee-hub-card__countdown.expired {
    color: var(--tg-hint);
    opacity: 0.6;
}

/* Статусные тексты для карточек (resolved, cancelled, expired calendar) */
.bee-hub-card__status-text {
    font-size: 12px;
    margin-top: 4px;
    font-weight: 500;
}
.bee-hub-card__status-text--resolved {
    color: var(--success);
}
.bee-hub-card__status-text--cancelled {
    color: var(--error);
}
.bee-hub-card__status-text--finished {
    color: var(--tg-hint);
}

/* Пользовательское действие (ставка, ответ) */
.bee-hub-card__user-action {
    font-size: 12px;
    color: var(--success);
    margin-top: 4px;
    font-weight: 500;
}

/* ── Контекстные трансформации карточек ── */

/* Resolved — приглушённая */
.bee-hub-card[data-status="resolved"] { opacity: 0.65; }

/* Cancelled — ещё более приглушённая + зачёркнутый заголовок */
.bee-hub-card[data-status="cancelled"] { opacity: 0.45; }
.bee-hub-card[data-status="cancelled"] .bee-hub-card__title {
    text-decoration: line-through;
    text-decoration-color: var(--tg-hint);
}

/* Юзер участвовал — акцентная полоска слева */
.bee-hub-card[data-participated="true"] {
    border-left: 3px solid var(--accent);
    padding-left: 17px;
}

/* ── Орбитальные keyframes ── */
@keyframes starPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50%      { transform: translate(-50%, -50%) scale(1.08); }
}
@keyframes orbit {
    from { transform: translate(-50%, -50%) rotate(0deg)   translateX(var(--orbit-r)) rotate(0deg); }
    to   { transform: translate(-50%, -50%) rotate(360deg) translateX(var(--orbit-r)) rotate(-360deg); }
}
@keyframes binaryOrbit {
    from { transform: translate(-50%, -50%) rotate(0deg)   translateX(var(--binary-r)) rotate(0deg); }
    to   { transform: translate(-50%, -50%) rotate(360deg) translateX(var(--binary-r)) rotate(-360deg); }
}
@keyframes trailSpin {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to   { transform: translate(-50%, -50%) rotate(360deg); }
}
@keyframes emojiPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50%      { transform: translate(-50%, -50%) scale(1.15); }
}
@keyframes countdownPulse {
    0%, 100% { opacity: 1; }
    50%      { opacity: 0.4; }
}
@keyframes resolvedFlash {
    0%   { background: transparent; }
    20%  { background: rgba(76, 175, 80, 0.06); }
    100% { background: transparent; }
}

/* ── Metadata-driven CSS-классы (применяются JS) ── */

/* Hot — усиленная пульсация звезды */
.bee-hub-card--hot .bee-hub-card__emoji--star {
    animation: emojiPulse 2s ease-in-out infinite;
    filter: drop-shadow(0 0 10px var(--glow-color, rgba(255, 152, 0, 0.6)));
}

/* New — однократная пульсация */
.bee-hub-card--new .bee-hub-card__emoji--star {
    animation: emojiPulse 2s ease-in-out 1;
}
.bee-hub-card--new {
    animation: fadeIn var(--anim-duration) ease backwards;
}

/* Participated — зелёное свечение звезды */
.bee-hub-card--participated .bee-hub-card__emoji--star {
    filter: drop-shadow(0 0 6px rgba(76, 175, 80, 0.5));
}

/* Deadline < 24ч — countdown пульсация */
.bee-hub-card--deadline-near .bee-hub-card__countdown {
    animation: countdownPulse 2s ease-in-out infinite;
    font-weight: 600;
}

/* Deadline < 1ч — красное свечение + ускоренная пульсация */
.bee-hub-card--deadline-urgent .bee-hub-card__countdown {
    animation: countdownPulse 1s ease-in-out infinite;
    color: var(--error) !important;
    font-weight: 700;
}
.bee-hub-card--deadline-urgent .bee-hub-card__emoji--star {
    animation: emojiPulse 1s ease-in-out infinite;
    filter: drop-shadow(0 0 10px rgba(244, 67, 54, 0.6));
}

/* Только что resolved — зелёная вспышка фона */
.bee-hub-card--just-resolved {
    animation: resolvedFlash 2s ease-out 1, fadeIn var(--anim-duration) ease backwards;
}

/* Trending — бейдж с огоньком */
.bee-hub-card--trending .bee-hub-badge::after {
    content: ' \1F525';
    font-size: 9px;
}

/* Календарь — скоро событие */
.bee-hub-card--event-soon .bee-hub-card__countdown {
    animation: countdownPulse 1.5s ease-in-out infinite;
    color: var(--accent);
    font-weight: 600;
}

/* Нет будущих событий — серые эмодзи, орбиты на паузе */
.bee-hub-card--no-future .bee-hub-card__visual {
    opacity: 0.4;
    filter: grayscale(0.8);
}
.bee-hub-card--no-future .bee-hub-card__emoji--orbit1,
.bee-hub-card--no-future .bee-hub-card__emoji--orbit2,
.bee-hub-card--no-future .bee-hub-card__emoji--orbit3,
.bee-hub-card--no-future .bee-hub-card__emoji--orbit4,
.bee-hub-card--no-future .bee-hub-card__emoji--orbit5 {
    animation-play-state: paused;
}
.bee-hub-card--no-future .bee-hub-card__trail--orbit3 { animation-play-state: paused; }
.bee-hub-card--no-future { opacity: 0.55; }

/* ── Доступность: уменьшенное движение ── */
@media (prefers-reduced-motion: reduce) {
    .bee-hub-card__emoji--star { animation: none; }
    .bee-hub-card__emoji--star2 {
        animation: none;
        transform: translate(-50%, -50%) translateX(var(--binary-r));
    }
    .bee-hub-card__emoji--orbit1 {
        animation: none;
        transform: translate(-50%, -50%) rotate(45deg) translateX(var(--orbit-r)) rotate(-45deg);
    }
    .bee-hub-card__emoji--orbit2 {
        animation: none;
        transform: translate(-50%, -50%) rotate(225deg) translateX(var(--orbit-r)) rotate(-225deg);
    }
    .bee-hub-card__visual-emojis::before,
    .bee-hub-card__visual-emojis::after { animation: none; }
    .bee-hub-card__emoji--orbit3 {
        animation: none;
        transform: translate(-50%, -50%) rotate(135deg) translateX(var(--orbit-r)) rotate(-135deg);
    }
    .bee-hub-card__emoji--orbit4 {
        animation: none;
        transform: translate(-50%, -50%) rotate(300deg) translateX(var(--orbit-r)) rotate(-300deg);
    }
    .bee-hub-card__emoji--orbit5 {
        animation: none;
        transform: translate(-50%, -50%) rotate(120deg) translateX(var(--orbit-r)) rotate(-120deg);
    }
    .bee-hub-card__trail--orbit3 { animation: none; }
}

/* ── Responsive: орбитальная панель на узких экранах ── */
@media (max-width: 360px) {
    .bee-hub-card__visual { width: 80px; height: 80px; }
    /* Collapsed (default): крупная звезда 24px */
    .bee-hub-card__emoji--star { font-size: calc(24px * var(--star-scale, 1)); }
    .bee-hub-card__star-avatar { width: calc(26px * var(--star-scale, 1)); height: calc(26px * var(--star-scale, 1)); }
    /* Expanded: уменьшается до 17px */
    .bee-hub-card.expanded .bee-hub-card__emoji--star { font-size: calc(17px * var(--star-scale, 1)); }
    .bee-hub-card.expanded .bee-hub-card__star-avatar { width: calc(18px * var(--star-scale, 1)); height: calc(18px * var(--star-scale, 1)); }
    .bee-hub-card__emoji--star2 { font-size: calc(14px * var(--star-scale, 1)); }
    .bee-hub-card__emoji--orbit1 { font-size: 12px; --orbit1-r: 16px; }
    .bee-hub-card__emoji--orbit2 { font-size: 10px; --orbit2-r: 26px; }
    .bee-hub-card__emoji--orbit3 { font-size: 9px; }
    .bee-hub-card__emoji--orbit4 { font-size: 8px; --orbit3-r: 34px; }
    .bee-hub-card__emoji--orbit5 { font-size: 7px; }
    .bee-hub-card__visual-emojis { --binary-r: 6px; }
    .bee-hub-card__visual-metric { font-size: 8px; }
}

/* Бейдж типа (inline в meta-row) */
.bee-hub-badge {
    display: inline-flex;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 6px;
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
}

.bee-hub-badge--calendar    { background: #FFF3E0; color: #E65100; }
.bee-hub-badge--prediction  { background: #E3F2FD; color: #1565C0; }
.bee-hub-badge--dashboard   { background: #E8F5E9; color: #2E7D32; }
.bee-hub-badge--survey      { background: #F3E5F5; color: #7B1FA2; }
.bee-hub-badge--leaderboard { background: #FFF8E1; color: #F57F17; }
.bee-hub-badge--llm         { background: #EDE7F6; color: #4527A0; }
.bee-hub-badge--infra       { background: #ECEFF1; color: #37474F; }
.bee-hub-badge--page        { background: #E0E0E0; color: #424242; }

/* Виджет-пиллы с акцентом по типу карточки */
.bee-hub-card[data-type="prediction"] .bee-hub-widget  { background: rgba(36, 129, 204, 0.15); }
.bee-hub-card[data-type="calendar"]   .bee-hub-widget  { background: rgba(255, 193, 7, 0.15); }
.bee-hub-card[data-type="survey"]     .bee-hub-widget  { background: rgba(76, 175, 80, 0.15); }
.bee-hub-card[data-type="leaderboard"] .bee-hub-widget { background: rgba(255, 215, 0, 0.12); }
.bee-hub-card[data-type="dashboard"]  .bee-hub-widget  { background: rgba(156, 39, 176, 0.12); }
.bee-hub-card[data-type="llm"]        .bee-hub-widget  { background: rgba(69, 39, 160, 0.12); }
.bee-hub-card[data-type="infra"]      .bee-hub-widget  { background: rgba(96, 125, 139, 0.12); }

/* ── Dark mode: Hub бейджи, иконки ── */
@media (prefers-color-scheme: dark) {
    .bee-hub-badge--prediction  { background: rgba(36, 129, 204, 0.25);  color: #64B5F6; }
    .bee-hub-badge--calendar    { background: rgba(230, 81, 0, 0.25);    color: #FFB74D; }
    .bee-hub-badge--survey      { background: rgba(76, 175, 80, 0.25);   color: #81C784; }
    .bee-hub-badge--leaderboard { background: rgba(245, 127, 23, 0.25);  color: #FFD54F; }
    .bee-hub-badge--dashboard   { background: rgba(156, 39, 176, 0.25);  color: #CE93D8; }
    .bee-hub-badge--llm         { background: rgba(69, 39, 160, 0.25);   color: #B39DDB; }
    .bee-hub-badge--infra       { background: rgba(128, 128, 128, 0.20); color: #B0BEC5; }
    .bee-hub-badge--page        { background: rgba(128, 128, 128, 0.20); color: #BDBDBD; }

}

/* ── Section headers (Активные / Постоянные) ── */
.bee-hub-section-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 12px 16px 6px;
    font-size: 12px;
    font-weight: 600;
    color: var(--tg-hint);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.bee-hub-section-header__count {
    font-size: 10px;
    background: rgba(128, 128, 128, 0.15);
    padding: 1px 6px;
    border-radius: 8px;
    margin-left: auto;
}

/* ── Пустое состояние / нет результатов ── */
.bee-hub-empty,
.bee-hub-no-results {
    text-align: center;
    padding: 60px 20px;
}

.bee-hub-empty-icon {
    font-size: 48px;
    margin-bottom: 12px;
}

.bee-hub-empty-text {
    font-size: 17px;
    font-weight: 600;
    color: var(--tg-text);
    margin-bottom: 6px;
}

.bee-hub-empty-hint {
    font-size: 14px;
    color: var(--tg-hint);
}


/* ══════════════════════════════════════════════════════════
   Profile — Профиль пользователя
   ══════════════════════════════════════════════════════════ */

.bee-profile-avatar {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: var(--accent);
    color: var(--accent-text);
    font-size: 28px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    background-size: cover;
    background-position: center;
}

.bee-profile-name {
    font-size: 20px;
    font-weight: 700;
    color: var(--tg-text);
}

.bee-profile-username {
    font-size: 14px;
    color: var(--tg-hint);
    margin-top: 2px;
}

.bee-profile-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    text-align: center;
}

.bee-profile-stats--two {
    grid-template-columns: repeat(2, 1fr);
}

.bee-profile-stat__value {
    font-size: 18px;
    font-weight: 700;
    color: var(--tg-text);
}

.bee-profile-stat--won {
    color: var(--success, #4CAF50);
}

.bee-profile-stat--lost {
    color: var(--error, #F44336);
}

.bee-profile-stat__label {
    font-size: 11px;
    color: var(--tg-hint);
    margin-top: 2px;
}

.bee-profile-roles {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.bee-profile-tx-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.bee-profile-tx {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid var(--tg-separator, rgba(128,128,128,0.12));
}

.bee-profile-tx:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.bee-profile-tx__info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.bee-profile-tx__type {
    font-size: 13px;
    font-weight: 600;
    text-transform: capitalize;
}

.bee-profile-tx--win       { color: var(--success, #4CAF50); }
.bee-profile-tx--deposit   { color: var(--accent); }
.bee-profile-tx--loss      { color: var(--error, #F44336); }
.bee-profile-tx--refund    { color: var(--tg-link, #2481CC); }
.bee-profile-tx--bet       { color: var(--accent); }

.bee-profile-tx__desc {
    font-size: 12px;
    color: var(--tg-hint);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bee-profile-tx__amount {
    font-size: 15px;
    font-weight: 600;
    white-space: nowrap;
    margin-left: 12px;
}

.bee-profile-tx--positive { color: var(--success, #4CAF50); }
.bee-profile-tx--negative { color: var(--error, #F44336); }
