# Telegram-MCP

[![Version](https://img.shields.io/badge/version-2026.02.11-blue.svg)](https://github.com/plagness/Telegram-MCP/releases)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Node.js](https://img.shields.io/badge/node.js-18+-green.svg)](https://nodejs.org/)
[![MCP Tools](https://img.shields.io/badge/MCP%20tools-46-orange.svg)](docs/mcp.md)

–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API —á–µ—Ä–µ–∑ MCP (Model Context Protocol).

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, –º–µ–¥–∏–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏, –ø—Ä–∏—ë–º –≤–µ–±—Ö—É–∫–æ–≤, **prediction markets (—Å—Ç–∞–≤–∫–∏ Stars)** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **46 MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å LLM (Claude, ChatGPT –∏ –¥—Ä.).

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üì® –°–æ–æ–±—â–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Å –∞—É–¥–∏—Ç-—Ç—Ä–µ–π–ª–æ–º
- HTML/MarkdownV2 —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Reply-to-message, message threading (—Ç–æ–ø–∏–∫–∏)
- Pin/Unpin —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ç–∏—Ö–∏–º –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º
- Forward/Copy —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
- Live —Å–æ–æ–±—â–µ–Ω–∏—è (–∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30—Å)

### üñºÔ∏è –ú–µ–¥–∏–∞
- **–§–æ—Ç–æ**: URL, file_id, multipart upload
- **–í–∏–¥–µ–æ**: URL, file_id —Å preview
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: –ª—é–±—ã–µ —Ñ–∞–π–ª—ã —Å caption
- **–ê–Ω–∏–º–∞—Ü–∏—è/GIF**: send_animation
- **–ê—É–¥–∏–æ**: —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (performer, title, duration)
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: voice messages
- **–°—Ç–∏–∫–µ—Ä—ã**: –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ file_id
- **–ú–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã (–∞–ª—å–±–æ–º—ã)**: 2-10 —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

### üéØ CommandHandler pattern (SDK)
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@api.command()` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- Guard-—Ñ–∏–ª—å—Ç—Ä—ã: `chat_id`, `user_id` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- Long polling —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Telegram (setMyCommands)

### üìä –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —à–∞–±–ª–æ–Ω—ã
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã**: 6 —Å—Ç–∏–ª–µ–π (classic, blocks, circles, squares, dots, minimal)
- **Emoji-–≥—Ä–∞–¥–∞—Ü–∏–∏**: health (üíö‚Üíüíõ‚Üíüß°‚Üí‚ù§Ô∏è‚Üíüíî), status, priority, connection
- **Hardware state blocks**: CPU, RAM, GPU, Disk, Network
- **Jinja2 —à–∞–±–ª–æ–Ω—ã**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **Auto-pin –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–æ–ª–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### üë• Chat Management
- **Ban/Unban**: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –æ–ø—Ü–∏—è–º–∏ revoke_messages, until_date
- **Restrict**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ (can_send_messages, can_send_media, etc.)
- **Promote**: –ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ –∞–¥–º–∏–Ω–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—Ä–∞–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–∞—Ö –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö

### üîî Updates & Webhooks
- **Long polling**: getUpdates —Å offset tracking
- **Webhooks**: –ø—Ä–∏—ë–º –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **Chat Actions**: typing –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (typing, upload_photo, record_video, etc.)
- –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

### üé® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- **–û–ø—Ä–æ—Å—ã**: —Å–æ–∑–¥–∞–Ω–∏–µ polls –∏ quiz —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- **–†–µ–∞–∫—Ü–∏–∏**: setMessageReaction (üëç/üî•/‚ù§Ô∏è –∏ –¥—Ä.)
- **Callback queries**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ inline-–∫–Ω–æ–ø–æ–∫
- **Reply markup**: inline/reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
- **Rate limiting**: token-bucket –ø–æ chat_id
- **Retry**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ 429/5xx
- **Python SDK**: –≥–æ—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **MCP**: 46 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è LLM

### üöÄ Bot API 9.x (2025-2026)
- **–ß–µ–∫-–ª–∏—Å—Ç—ã** (Bot API 9.1): –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á —Å –≥–∞–ª–æ—á–∫–∞–º–∏ (–¥–æ 30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- **–ó–≤—ë–∑–¥—ã** (Bot API 9.1): –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∑–≤—ë–∑–¥ –±–æ—Ç–∞
- **–ü–æ–¥–∞—Ä–∫–∏** (Bot API 9.3): –ø–æ–¥–∞—Ä–∫–∏ –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞ –∑–≤—ë–∑–¥—ã, –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–∞—Ä–∫–æ–≤
- **–ò—Å—Ç–æ—Ä–∏–∏** (Bot API 9.3): —Ä–µ–ø–æ—Å—Ç –∏—Å—Ç–æ—Ä–∏–π –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ä–æ—Å—ã**: –¥–æ 12 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ (Bot API 9.1)

### üéØ Prediction Markets (Polymarket-style Betting)
- **–°—Ç–∞–≤–∫–∏ Stars** —Å –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä–æ–º (–Ω–µ–ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç = –±–æ–ª—å—à–∏–π –≤—ã–∏–≥—Ä—ã—à)
- **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ LLM
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞**: –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ (—Å –∏–º–µ–Ω–∞–º–∏)
- **LLM –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å llm-mcp, Ollama, OpenRouter
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π**: —á–µ—Ä–µ–∑ channel-mcp –¥–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
- **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**: –Ω–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ ‚Üí –ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç, –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- **Stars Payments**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ invoice, refund, transactions
- **–†–∞–±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–∞—Ö**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ Stars, –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- **MCP tools**: 9 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ LLM

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  tgapi            ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Telegram Bot  ‚îÇ
‚îÇ  (SDK / curl)   ‚îÇ     ‚îÇ  (FastAPI :8081)  ‚îÇ     ‚îÇ     API       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   LLM / Claude  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  tgmcp            ‚îÇ
‚îÇ                 ‚îÇ     ‚îÇ  (Node.js :3335)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ   PostgreSQL      ‚îÇ
                        ‚îÇ   (:5436)         ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|------|------------|
| **tgapi** | Python / FastAPI | 8081 | HTTP API, –≤–µ–±—Ö—É–∫–∏, —à–∞–±–ª–æ–Ω—ã |
| **tgmcp** | Node.js / TypeScript | 3335 | MCP-—Ç—É–ª–∑—ã + HTTP-–º–æ—Å—Ç |
| **tgdb** | PostgreSQL 16 | 5436 | –°–æ–æ–±—â–µ–Ω–∏—è, —à–∞–±–ª–æ–Ω—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –°–æ–∑–¥–∞—Ç—å .env —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞
cp .env.example .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TELEGRAM_BOT_TOKEN –≤ .env

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker compose -f compose.yml up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
curl http://127.0.0.1:8081/health
curl http://127.0.0.1:3335/health
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### curl

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
curl -X POST http://127.0.0.1:8081/v1/messages/send \
  -H 'content-type: application/json' \
  -d '{"chat_id": -100123456, "text": "<b>–ü—Ä–∏–≤–µ—Ç!</b>", "parse_mode": "HTML"}'

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –ø–æ URL
curl -X POST http://127.0.0.1:8081/v1/media/send-photo \
  -H 'content-type: application/json' \
  -d '{"chat_id": -100123456, "photo": "https://example.com/img.jpg", "caption": "–û–ø–∏—Å–∞–Ω–∏–µ"}'

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Ñ–∞–π–ª–æ–º
curl -X POST http://127.0.0.1:8081/v1/media/upload-photo \
  -F "chat_id=-100123456" \
  -F "caption=–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ" \
  -F "file=@/path/to/photo.jpg"

# –°–æ–æ–±—â–µ–Ω–∏–µ —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏
curl -X POST http://127.0.0.1:8081/v1/messages/send \
  -H 'content-type: application/json' \
  -d '{
    "chat_id": -100123456,
    "text": "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
    "reply_markup": {
      "inline_keyboard": [[
        {"text": "–î–∞", "callback_data": "yes"},
        {"text": "–ù–µ—Ç", "callback_data": "no"}
      ]]
    }
  }'
```

### Python SDK

```python
from telegram_api_client import TelegramAPI

async with TelegramAPI("http://localhost:8081") as api:
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    msg = await api.send_message(
        chat_id=-100123456,
        text="<b>–ü—Ä–∏–≤–µ—Ç!</b>",
        parse_mode="HTML",
    )

    # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    await api.edit_message(msg["id"], text="–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç")

    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ (—Ñ–∞–π–ª)
    with open("chart.png", "rb") as f:
        await api.send_photo(chat_id=-100123456, photo=f, caption="–ì—Ä–∞—Ñ–∏–∫")

    # –ü—Ä–æ–≥—Ä–µ—Å—Å-—Å–æ–æ–±—â–µ–Ω–∏–µ (send ‚Üí edit ‚Üí delete)
    async with api.progress(chat_id=-100123456) as p:
        await p.update(1, 3, "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")
        await p.update(2, 3, "–û–±—Ä–∞–±–æ—Ç–∫–∞...")
        await p.update(3, 3, "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...")
    # –°–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
```

### MCP (–¥–ª—è LLM)

```bash
# –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
curl http://127.0.0.1:3335/tools

# –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
curl -X POST http://127.0.0.1:3335/tools/messages.send \
  -H 'content-type: application/json' \
  -d '{"chat_id": -100123456, "text": "–ü—Ä–∏–≤–µ—Ç –æ—Ç LLM"}'
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Telegram-MCP/
‚îú‚îÄ‚îÄ api/                    # FastAPI-—Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, lifespan, —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (pydantic-settings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py           # PostgreSQL connection pool
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram_client.py  # httpx-–∫–ª–∏–µ–Ω—Ç –∫ Telegram Bot API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_limiter.py     # Token-bucket rate limiter
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates.py    # Jinja2-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py       # Pydantic-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers/        # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.py     # –°–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ media.py        # –§–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤–∏–¥–µ–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ polls.py        # –û–ø—Ä–æ—Å—ã –∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reactions.py    # –†–µ–∞–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates.py    # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py     # –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ callbacks.py    # Callback queries
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chats.py        # –ß–∞—Ç—ã –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ webhook.py      # –í–µ–±—Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.py       # Healthcheck, –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ mcp/                    # MCP-—Å–µ—Ä–≤–µ—Ä (Node.js)
‚îÇ   ‚îú‚îÄ‚îÄ src/index.ts        # 46 MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ sdk/                    # Python SDK
‚îÇ   ‚îî‚îÄ‚îÄ telegram_api_client/
‚îÇ       ‚îú‚îÄ‚îÄ client.py       # TelegramAPI + ProgressContext
‚îÇ       ‚îî‚îÄ‚îÄ exceptions.py   # TelegramAPIError
‚îú‚îÄ‚îÄ db/init/                # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql       # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ 02_extensions.sql   # –ú–µ–¥–∏–∞, callbacks, webhook config
‚îú‚îÄ‚îÄ templates/              # Jinja2-—à–∞–±–ª–æ–Ω—ã (auto-seed)
‚îú‚îÄ‚îÄ scripts/                # –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ compose.yml             # Docker Compose
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [docs/api.md](docs/api.md) ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ HTTP API
- [docs/sdk.md](docs/sdk.md) ‚Äî Python SDK
- [docs/commands.md](docs/commands.md) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏ –±–æ—Ç–∞
- [docs/webhooks.md](docs/webhooks.md) ‚Äî –≤–µ–±—Ö—É–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [docs/mcp.md](docs/mcp.md) ‚Äî MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [docs/formatting.md](docs/formatting.md) ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram
- [docs/schema.md](docs/schema.md) ‚Äî —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|-------------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –∏–∑ @BotFather | ‚Äî (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `DB_USER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `telegram` |
| `DB_PASSWORD` | –ü–∞—Ä–æ–ª—å –ë–î | `telegram` |
| `DB_NAME` | –ò–º—è –ë–î | `telegram` |
| `PORT_DB_TG` | –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç PostgreSQL | `5436` |
| `PORT_HTTP_TGAPI` | –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç API | `8081` |
| `PORT_MCP_TG` | –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç MCP | `3335` |
| `TELEGRAM_API_URL` | –Ø–≤–Ω—ã–π URL API –¥–ª—è MCP bridge | `http://tgapi:8000` |
| `TELEGRAM_API_BASE` | Legacy alias –¥–ª—è URL API | `http://tgapi:8000` |
| `API_PORT` | Legacy fallback –¥–ª—è –ø–æ—Ä—Ç–∞ API | `8081` |
| `MCP_HTTP_PORT` | Legacy fallback –¥–ª—è –ø–æ—Ä—Ç–∞ MCP | `3335` |
| `MCP_HTTP_TOKEN` | Bearer-—Ç–æ–∫–µ–Ω –¥–ª—è MCP HTTP | ‚Äî (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `TEMPLATE_AUTOSEED` | –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ `templates/` | `true` |

–ï—Å–ª–∏ `TELEGRAM_API_URL`/`TELEGRAM_API_BASE` –Ω–µ –∑–∞–¥–∞–Ω—ã, MCP —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `http://tgapi:8000`.
–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –Ω–∞ 1 —Ä–µ–ª–∏–∑ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è retry –Ω–∞ legacy `http://telegram-api:8000`.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
